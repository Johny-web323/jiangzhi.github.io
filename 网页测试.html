<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>古风文章分享</title>
    <style>
        @font-face {
            font-family: 'Xiaozhuan';
            src: url('https://fonts.gstatic.com/s/simkai/v10/7Au-p_0qiz-afTzGLQ.woff2');
        }

        @font-face {
            font-family: 'Xingkai';
            src: url('https://fonts.gstatic.com/s/maobi/v14/7Au-p_0qiz-afTzGLQ.woff2'); /* 替换为行楷字体URL */
        }

        @font-face {
            font-family: 'Lishu';
            src: url('https://your-lishu-font-url.woff2'); /* 替换为隶书字体URL */
        }

        @font-face {
            font-family: 'Caoshu';
            src: url('https://your-caoshu-font-url.woff2'); /* 替换为草书字体URL */
        }

        body {
            font-family: SimSun, sans-serif;
            font-size: 14px;
            margin: 0;
            padding: 0;
            background-image: url('https://your-background-pattern-url.jpg');
            background-repeat: repeat;
            position: relative;
        }

        /* 星星闪动效果 */
        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background-color: white;
            border-radius: 50%;
            animation: twinkle 2s infinite;
        }

        @keyframes twinkle {
            0% {
                opacity: 1;
            }
            50% {
                opacity: 0.2;
            }
            100% {
                opacity: 1;
            }
        }

        header {
            background-color: skyblue;
            color: black; /* 标题字体颜色改为黑色 */
            text-align: center;
            padding: 1em;
            font-family: 'Lishu', sans-serif; /* 修改为隶书 */
            border: 20px solid transparent;
            border-image: url('https://your-border-pattern-url.jpg') 30 round;
            position: relative; /* 相对定位 */
        }

        header h1 {
            font-size: 72px; /* 标题字号改为72px */
            font-weight: bold; /* 加粗 */
            margin: 0; /* 去掉默认的外边距 */
        }

        /* 身份选择框 */
        .user-role {
            position: absolute;
            bottom: 10px; /* 贴近下边 */
            right: 10px; /* 贴近右边 */
            font-size: 24px; /* 调整字体大小 */
            display: flex;
            align-items: center;
            gap: 10px; /* 表情和选择框之间的间距 */
        }

        .user-role select {
            padding: 5px;
            font-size: 16px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: white;
        }

        /* 新增竖排对称文本样式 */
        .vertical-text {
            position: absolute;
            top: 20px; /* 往上移动一些 */
            display: flex;
            flex-direction: column;
            justify-content: flex-start; /* 靠上对齐 */
            align-items: center;
            font-family: 'Xingkai', cursive;
            font-size: 72px; /* 调整字号为72px */
            writing-mode: vertical-rl; /* 竖排文字 */
            text-orientation: upright; /* 文字方向为正 */
            pointer-events: none; /* 防止干扰点击 */
            line-height: 22pt; /* 设置间距为22磅 */
        }

        .vertical-text.left {
            left: 20px; /* 左侧竖排字往右靠近编辑框 */
        }

        .vertical-text.right {
            right: 20px; /* 右侧竖排字往左靠近编辑框 */
        }

        main {
            padding: 2em;
            display: flex;
            flex-direction: column;
            align-items: center;
            position: relative; /* 确保竖排文本相对main定位 */
        }

        .column {
            margin-bottom: 2em;
            border: 1px solid #ccc;
            padding: 1em;
            background-color: #fffaf0;
            background-image: url('https://www.transparenttextures.com/patterns/light-wool.png');
            background-repeat: repeat;
            width: 80%;
            box-sizing: border-box;
            position: relative;
        }

        /* 作为装饰元素 */
        .column::before {
            content: url('https://your-decoration-pattern-url.png');
            position: absolute;
            top: -10px;
            left: -10px;
            width: 30px;
            height: 30px;
        }

        .column h2 {
            margin-top: 0;
        }

        /* 调整输入框和按钮的高度 */
        .editor-controls {
            display: flex;
            align-items: center;
            gap: 10px; /* 控制元素之间的间距 */
            margin-bottom: 10px;
        }

        .editor-controls input[type="text"],
        .editor-controls select,
        .editor-controls input[type="color"],
        .editor-controls button {
            height: 40px; /* 统一高度 */
            box-sizing: border-box;
            font-size: 16px; /* 确保文字清晰可见 */
        }

        .editor-controls button {
            padding: 0 10px; /* 按钮内边距 */
        }

        .editor {
            width: 100%;
            min-height: 100px;
            margin-bottom: 10px;
            background-color: #fffaf0;
            background-image: url('https://www.transparenttextures.com/patterns/light-wool.png');
            background-repeat: repeat;
            border: 1px solid #ccc;
            padding: 5px;
            outline: none;
            line-height: 1.25;
            font-size: 16px; /* 确保文字清晰可见 */
        }

        .article {
            border: 1px solid #eee;
            padding: 10px;
            margin-bottom: 10px;
            background-color: #fffaf0;
            background-image: url('https://www.transparenttextures.com/patterns/light-wool.png');
            background-repeat: repeat;
            line-height: 1.25;
        }

        .article h3 {
            cursor: pointer;
        }

        .article-content {
            display: block;
        }

        /* 评论区域样式 */
        .comments {
            margin-top: 10px;
            padding: 10px;
            border-top: 1px solid #eee;
        }

        .comment-input {
            width: 100%;
            margin-bottom: 10px;
            padding: 5px;
            font-size: 14px;
        }

        .comment-list {
            margin-top: 10px;
        }

        .comment-item {
            margin-bottom: 5px;
            padding: 5px;
            background-color: #f9f9f9;
            border-radius: 5px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .comment-item button {
            margin-left: 10px;
        }

        /* 响应式设计 */
        @media (max-width: 768px) {
            body {
                background-size: contain;
            }

            .vertical-text {
                font-size: 48px; /* 在小屏幕上减小字号 */
            }

            .editor-controls {
                flex-wrap: wrap; /* 小屏幕上换行 */
            }

            header h1 {
                font-size: 48px; /* 小屏幕上标题字号减小 */
            }
        }

        /* 自定义加粗和下划线样式 */
        .custom-bold {
            background-color: white;
            border: 1px solid black;
            color: black;
        }

        .custom-underline {
            background-color: white;
            border: 1px solid black;
            color: black;
            text-decoration: underline;
        }
    </style>
</head>

<body>
    <!-- 随机生成星星 -->
    <script>
        for (let i = 0; i < 50; i++) {
            const star = document.createElement('div');
            star.classList.add('star');
            star.style.left = Math.random() * window.innerWidth + 'px';
            star.style.top = Math.random() * window.innerHeight + 'px';
            document.body.appendChild(star);
        }
    </script>
    <header>
        <h1>道阻且长     行则将至</h1> <!-- 修改标题 -->
        <!-- 身份选择框 -->
        <div class="user-role">
            <span id="roleEmoji">👤</span> <!-- 默认显示游客表情 -->
            <select id="userRole" onchange="changeUserRole()">
                <option value="guest">👤 游客</option>
                <option value="admin">👑 管理员</option>
            </select>
        </div>
    </header>
    <main>
        <!-- 新增竖排对称文本 -->
        <div class="vertical-text left">吾将上下而求索</div>
        <div class="vertical-text right">路漫漫其修远兮</div>

        <div class="column">
            <h2>教学随笔</h2>
            <div class="editor-controls">
                <input type="text" id="teachingEssayTitle" placeholder="请输入文章标题">
                <input type="text" id="teachingEssayAuthor" placeholder="请输入本文作者"> <!-- 新增作者输入框 -->
                <select id="teachingEssayFont" onchange="changeFont('teachingEssay')">
                    <option value="SimSun">宋体</option>
                    <option value="Microsoft YaHei">微软雅黑</option>
                    <option value="SimHei">黑体</option>
                    <option value="KaiTi">楷体</option>
                    <option value="Lishu">隶书</option>
                    <option value="Caoshu">草书</option>
                </select>
                <select id="teachingEssayFontSize" onchange="changeFontSizeSelect('teachingEssay')">
                    <option value="12px">12px</option>
                    <option value="14px" selected>14px</option>
                    <option value="16px">16px</option>
                    <option value="18px">18px</option>
                    <option value="20px">20px</option>
                </select>
                <input type="color" id="teachingEssayColor" onchange="changeTextColor('teachingEssay')">
                <button onclick="toggleBold('teachingEssay')">B</button>
                <button onclick="toggleUnderline('teachingEssay')">U̲</button>
            </div>
            <div class="editor" id="teachingEssay" contenteditable="true"></div>
            <button onclick="saveContent('teachingEssay')">保存</button>
            <button onclick="hideArticle('teachingEssay')">隐藏文章</button>
            <div id="teachingEssayDisplay"></div>
        </div>

        <div class="column">
            <h2>阅读感悟</h2>
            <div class="editor-controls">
                <input type="text" id="readingInsightTitle" placeholder="请输入文章标题">
                <input type="text" id="readingInsightAuthor" placeholder="请输入本文作者"> <!-- 新增作者输入框 -->
                <select id="readingInsightFont" onchange="changeFont('readingInsight')">
                    <option value="SimSun">宋体</option>
                    <option value="Microsoft YaHei">微软雅黑</option>
                    <option value="SimHei">黑体</option>
                    <option value="KaiTi">楷体</option>
                    <option value="Lishu">隶书</option>
                    <option value="Caoshu">草书</option>
                </select>
                <select id="readingInsightFontSize" onchange="changeFontSizeSelect('readingInsight')">
                    <option value="12px">12px</option>
                    <option value="14px" selected>14px</option>
                    <option value="16px">16px</option>
                    <option value="18px">18px</option>
                    <option value="20px">20px</option>
                </select>
                <input type="color" id="readingInsightColor" onchange="changeTextColor('readingInsight')">
                <button onclick="toggleBold('readingInsight')">B</button>
                <button onclick="toggleUnderline('readingInsight')">U̲</button>
            </div>
            <div class="editor" id="readingInsight" contenteditable="true"></div>
            <button onclick="saveContent('readingInsight')">保存</button>
            <button onclick="hideArticle('readingInsight')">隐藏文章</button>
            <div id="readingInsightDisplay"></div>
        </div>

        <div class="column">
            <h2>学生文章</h2>
            <div class="editor-controls">
                <input type="text" id="studentArticleTitle" placeholder="请输入文章标题">
                <input type="text" id="studentArticleAuthor" placeholder="请输入本文作者"> <!-- 新增作者输入框 -->
                <select id="studentArticleFont" onchange="changeFont('studentArticle')">
                    <option value="SimSun">宋体</option>
                    <option value="Microsoft YaHei">微软雅黑</option>
                    <option value="SimHei">黑体</option>
                    <option value="KaiTi">楷体</option>
                    <option value="Lishu">隶书</option>
                    <option value="Caoshu">草书</option>
                </select>
                <select id="studentArticleFontSize" onchange="changeFontSizeSelect('studentArticle')">
                    <option value="12px">12px</option>
                    <option value="14px" selected>14px</option>
                    <option value="16px">16px</option>
                    <option value="18px">18px</option>
                    <option value="20px">20px</option>
                </select>
                <input type="color" id="studentArticleColor" onchange="changeTextColor('studentArticle')">
                <button onclick="toggleBold('studentArticle')">B</button>
                <button onclick="toggleUnderline('studentArticle')">U̲</button>
            </div>
            <div class="editor" id="studentArticle" contenteditable="true"></div>
            <button onclick="saveContent('studentArticle')">保存</button>
            <button onclick="hideArticle('studentArticle')">隐藏文章</button>
            <div id="studentArticleDisplay"></div>
        </div>
    </main>
    <script>
        let currentUserRole = 'guest'; // 默认身份为游客

        // 切换身份
        function changeUserRole() {
            const roleSelect = document.getElementById('userRole');
            const roleEmoji = document.getElementById('roleEmoji');
            currentUserRole = roleSelect.value;
            roleEmoji.textContent = currentUserRole === 'guest' ? '👤' : '👑'; // 更新表情
            updateUIForUserRole();
        }

        // 根据身份更新UI
        function updateUIForUserRole() {
            const editButtons = document.querySelectorAll('.edit-button');
            const deleteButtons = document.querySelectorAll('.delete-button');
            if (currentUserRole === 'admin') {
                editButtons.forEach(button => button.style.display = 'inline-block');
                deleteButtons.forEach(button => button.style.display = 'inline-block');
            } else {
                editButtons.forEach(button => button.style.display = 'none');
                deleteButtons.forEach(button => button.style.display = 'none');
            }
        }

        // 保存文章内容
        function saveContent(id) {
            const editor = document.getElementById(id);
            const titleInput = document.getElementById(id + 'Title');
            const authorInput = document.getElementById(id + 'Author');
            const title = titleInput.value;
            const author = authorInput.value;
            const display = document.getElementById(id + 'Display');
            const article = createArticle(title, author, editor.innerHTML, id);

            display.appendChild(article);
            editor.innerHTML = '';
            titleInput.value = '';
            authorInput.value = '';

            // 保存文章到本地存储
            saveToLocalStorage(id, title, author, editor.innerHTML);
        }

        // 创建文章
        function createArticle(title, author, content, id) {
            const article = document.createElement('div');
            article.classList.add('article');
            if (title) {
                const titleElement = document.createElement('h3');
                titleElement.textContent = `${title} - 作者：${author}`; // 显示标题和作者
                titleElement.addEventListener('click', function () {
                    const content = this.nextElementSibling;
                    content.style.display = content.style.display === 'none'? 'block' : 'none';
                });
                article.appendChild(titleElement);
            }
            const contentElement = document.createElement('div');
            contentElement.classList.add('article-content');
            contentElement.innerHTML = content;
            article.appendChild(contentElement);

            // 添加评论区域
            const comments = document.createElement('div');
            comments.classList.add('comments');
            const commentInput = document.createElement('input');
            commentInput.classList.add('comment-input');
            commentInput.placeholder = '请输入评论...';
            const commentButton = document.createElement('button');
            commentButton.textContent = '提交评论';
            commentButton.onclick = function () {
                addComment(comments, commentInput.value);
                commentInput.value = '';
            };
            const hideCommentsButton = document.createElement('button');
            hideCommentsButton.textContent = '隐藏评论';
            hideCommentsButton.onclick = function () {
                toggleComments(comments);
            };
            const commentList = document.createElement('div');
            commentList.classList.add('comment-list');
            comments.appendChild(commentInput);
            comments.appendChild(commentButton);
            comments.appendChild(hideCommentsButton);
            comments.appendChild(commentList);
            article.appendChild(comments);

            // 加载已保存的评论
            loadComments(commentList, id, title);

            const editButton = document.createElement('button');
            editButton.textContent = '修改';
            editButton.classList.add('edit-button');
            editButton.style.display = currentUserRole === 'admin' ? 'inline-block' : 'none';
            const editor = document.getElementById(id);
            const titleInput = document.getElementById(id + 'Title');
            const authorInput = document.getElementById(id + 'Author');
            editButton.onclick = function () {
                editContent(article, editor, titleInput, authorInput);
            };
            article.appendChild(editButton);

            const deleteButton = document.createElement('button');
            deleteButton.textContent = '删除';
            deleteButton.classList.add('delete-button');
            deleteButton.style.display = currentUserRole === 'admin' ? 'inline-block' : 'none';
            deleteButton.onclick = function () {
                deleteArticle(article, id);
            };
            article.appendChild(deleteButton);

            return article;
        }

        // 添加评论
        function addComment(commentList, commentText) {
            if (commentText.trim() === '') return;
            const commentItem = document.createElement('div');
            commentItem.classList.add('comment-item');
            commentItem.textContent = commentText;

            // 添加删除评论按钮
            const deleteCommentButton = document.createElement('button');
            deleteCommentButton.textContent = '删除';
            deleteCommentButton.onclick = function () {
                commentItem.remove();
                removeCommentFromLocalStorage(commentList.id, commentText);
            };
            commentItem.appendChild(deleteCommentButton);

            commentList.appendChild(commentItem);

            // 保存评论到本地存储
            saveCommentToLocalStorage(commentList.id, commentText);
        }

        // 加载评论
        function loadComments(commentList, id, title) {
            const savedComments = JSON.parse(localStorage.getItem('comments')) || {};
            const key = `${id}-${title}`;
            if (savedComments[key]) {
                savedComments[key].forEach(comment => {
                    const commentItem = document.createElement('div');
                    commentItem.classList.add('comment-item');
                    commentItem.textContent = comment;

                    // 添加删除评论按钮
                    const deleteCommentButton = document.createElement('button');
                    deleteCommentButton.textContent = '删除';
                    deleteCommentButton.onclick = function () {
                        commentItem.remove();
                        removeCommentFromLocalStorage(commentList.id, comment);
                    };
                    commentItem.appendChild(deleteCommentButton);

                    commentList.appendChild(commentItem);
                });
            }
        }

        // 保存评论到本地存储
        function saveCommentToLocalStorage(key, comment) {
            const savedComments = JSON.parse(localStorage.getItem('comments')) || {};
            savedComments[key] = savedComments[key] || [];
            savedComments[key].push(comment);
            localStorage.setItem('comments', JSON.stringify(savedComments));
        }

        // 从本地存储中删除评论
        function removeCommentFromLocalStorage(key, comment) {
            const savedComments = JSON.parse(localStorage.getItem('comments')) || {};
            if (savedComments[key]) {
                savedComments[key] = savedComments[key].filter(c => c !== comment);
                localStorage.setItem('comments', JSON.stringify(savedComments));
            }
        }

        // 隐藏文章
        function hideArticle(id) {
            const display = document.getElementById(id + 'Display');
            const articles = display.getElementsByClassName('article');
            for (let i = 0; i < articles.length; i++) {
                articles[i].style.display = articles[i].style.display === 'none'? 'block' : 'none';
            }
        }

        // 切换评论的显示/隐藏
        function toggleComments(comments) {
            const commentList = comments.querySelector('.comment-list');
            commentList.style.display = commentList.style.display === 'none'? 'block' : 'none';
        }

        // 其他函数保持不变
    </script>
</body>

</html>